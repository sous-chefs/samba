# This is the main Samba configuration file.
#
# It was dynamically generated by Chef on <%= node["fqdn"] %>
#
# Local modifications will be overwritten by Chef.
#

[global]
  workgroup = <%= node["samba"]["workgroup"] %>
  server string = <%= node["samba"]["server_string"] %>
  security = <%= node["samba"]["security"] %>
  map to guest = <%= node["samba"]["map_to_guest"] %>
  interfaces = <%= node["samba"]["interfaces"] %>
  hosts allow = <%= node["samba"]["hosts_allow"] %>
  load printers = <%= node["samba"]["load_printers"] %>
  passdb backend = <%= node["samba"]["passdb_backend"] %>
  dns proxy = <%= node["samba"]["dns_proxy"] %>

<% @node["samba"]["options"].each do |opt_name,opt_value| -%>
  <%= opt_name %> = <%= opt_value %>

<% end -%>
#============================ Share Definitions ==============================
<% @shares.each do |share,option| -%>
[<%= share %>]
  <% option.each do |o,v| -%>
  <%= o %> = <%= v.respond_to?(:join) ? v.join(',') : v %>
  <% end -%>

<% end -%>
