# This is the main Samba configuration file.
#
# It was dynamically generated by Chef on <%= node["fqdn"] %>
#
# Local modifications will be overwritten by Chef.
#

[global]
  realm = <%= @realm %>
  password server = <%= @password_server %>
  encrypt passwords = <%= @encrypt_passwords %>
  kerberos method = <%= @kerberos_method %>
  <% if @winbind_separator != '\\' %>
  winbind separator = <%= @winbind_separator %>
  <% end %>
  <% if @idmap_config %>
  idmap config <%= @idmap_config %>
  <% end %>
  workgroup = <%= @workgroup %>
  server string = <%= @server_string %>
  security = <%= @security %>
  map to guest = <%= @map_to_guest %>
  interfaces = <%= @interfaces %>
  hosts allow = <%= @hosts_allow %>
  load printers = <%= @load_printers %>
  passdb backend = <%= @passdb_backend %>
  dns proxy = <%= @dns_proxy %>
  max log size = <%= @max_log_size %>

<% if !@samba_options.nil? %>
  <% @samba_options.each do |opt_name,opt_value| -%>
    <%= opt_name %> = <%= opt_value %>
  <% end -%>
<% end -%>

#============================ Share Definitions ==============================
<% if !@shares.nil? %>
  <% @shares.each do |share,option| -%>
  [<%= share %>]
    <% option.each do |o,v| -%>
    <%= o %> = <%= v.respond_to?(:join) ? v.join(',') : v %>
    <% end -%>

  <% end -%>
<% end -%>
